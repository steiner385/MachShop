# Database Technical Specifications

This document provides comprehensive technical specifications for all 3,536 fields across 186 database tables in the MachShop Manufacturing Execution System (MES).

## Overview

Technical specifications define the implementation details for each database field:
- **dataSource**: Where data originates and how it's populated
- **format**: The specific format and structure of the data
- **validation**: Rules and constraints for data validation
- **calculations**: Any derived or calculated field logic
- **pattern**: Regular expression patterns for validation
- **constraints**: Database-level constraints and requirements

## Coverage

| Metric | Value |
|--------|-------|
| **Total Models** | 186 |
| **Total Fields** | 3,536 |
| **Fields with dataSource** | 3,536 (100%) |
| **Fields with format** | 3,536 (100%) |
| **Fields with validation** | 3,536 (100%) |
| **Coverage Level** | 100% |

## Technical Specification Categories

### 1. Identifier Fields

**Pattern**: `^id$`

**Specification**:
- **dataSource**: Auto-generated by database
- **format**: UUID/CUID - 24-27 character alphanumeric string
- **validation**: Non-null, unique primary key identifier
- **pattern**: `^[a-z0-9]{24,27}$`
- **constraints**: `UNIQUE`, `PRIMARY KEY`, `NOT NULL`

**Examples**:
- `clr8n5f2b0000q9nz9z9z9z9z`
- `clr8n5f2b0001q9nz9z9z9z9z`

### 2. Code Fields

**Pattern**: `^\w+Code$`

**Specification**:
- **dataSource**: User input or external system during entity creation
- **format**: Alphanumeric identifier with optional hyphens (e.g., "SITE-001", "MFG-A1")
- **validation**: Non-null, unique per site/enterprise, 3-20 characters, uppercase alphanumeric
- **pattern**: `^[A-Z0-9\-]{3,20}$`
- **constraints**: `UNIQUE`, `NOT NULL`

**Examples**:
- `SITE-001`
- `MFG-A1`
- `ASSEMBLY-LINE-02`

### 3. Name/Description Fields

**Pattern**: `^\w+Name$`, `^name$`, `^title$`, `^description$`

**Specification**:
- **dataSource**: User input during entity creation or update
- **format**: Free text string (1-255 characters typical, 1-500 for descriptions)
- **validation**: Required, non-null, trimmed, 1-255 characters (or 1-500 for descriptions)
- **constraints**: `NOT NULL`

**Examples**:
- `Assembly Line A`
- `Quality Control Station`
- `Production Equipment 01`

### 4. Boolean Flags

**Pattern**: `^is\w+$`

**Specification**:
- **dataSource**: User input during creation, defaults to true for isActive
- **format**: Boolean (true/false)
- **validation**: Non-null boolean, defaults to true for isActive
- **constraints**: `NOT NULL`, `DEFAULT true`

**Examples**:
- `true`
- `false`

### 5. Timestamp Fields

**Pattern**: `^createdAt$`, `^updatedAt$`

**Specification**:
- **dataSource**: Auto-generated by database on create/update
- **format**: ISO 8601 datetime with timezone (e.g., 2024-01-15T10:30:45Z)
- **validation**: Non-null, automatically set by database, immutable for createdAt
- **constraints**: `NOT NULL`, `DEFAULT now()`

**Examples**:
- `2024-01-15T10:30:45Z`
- `2024-01-15T14:45:22.123Z`

### 6. Foreign Key Fields

**Pattern**: `^\w+Id$`

**Specification**:
- **dataSource**: Reference to related entity, user-provided during creation
- **format**: UUID/CUID matching referenced entity
- **validation**: Must reference valid existing entity, non-null if required by constraint
- **pattern**: `^[a-z0-9]{24,27}$`
- **constraints**: `FOREIGN KEY`, `NOT NULL (if required)`

**Examples**:
- `clr8n5f2b0000q9nz9z9z9z9z`

### 7. Numeric Fields

**Pattern**: `^\w+Count$`, `^quantity`, `^amount`, `^value`, `^percentage`, `^rate`

**Specification**:
- **dataSource**: Calculated or user input (depends on field type)
- **format**: Numeric value (integer or decimal based on field type)
- **validation**: Non-negative, within business constraints (e.g., percentage 0-100)
- **constraints**: `NOT NULL (if required)`, `CHECK (field >= 0)`

**Examples**:
- `0`
- `100`
- `250`

### 8. Status/Enum Fields

**Pattern**: `^status$`, `^state$`, `^type$`, `^mode$`, `^level$`

**Specification**:
- **dataSource**: User selection from predefined list or system-generated
- **format**: Enum value from defined set
- **validation**: Must be one of valid enum values
- **constraints**: `NOT NULL`, `CHECK (value IN (valid_values))`

**Examples**:
- `ACTIVE`
- `COMPLETED`
- `PENDING`

### 9. JSON Fields

**Pattern**: `^\w+Data$`, `^metadata$`, `^config`, `^settings`

**Specification**:
- **dataSource**: Structured data from API or user input
- **format**: JSON object with specific schema
- **validation**: Valid JSON structure matching defined schema
- **constraints**: `NOT NULL`, `Schema validation required`

**Examples**:
- `{"key":"value"}`

### 10. Email Fields

**Pattern**: `^email$`, `^emailAddress`

**Specification**:
- **dataSource**: User input during account creation
- **format**: Valid email address format
- **validation**: Must match email regex pattern and be unique
- **pattern**: `^[^@\s]+@[^@\s]+\.[^@\s]+$`
- **constraints**: `UNIQUE`, `NOT NULL`

**Examples**:
- `user@example.com`
- `john.doe@company.com`

### 11. Phone Fields

**Pattern**: `^phone`, `^mobile`

**Specification**:
- **dataSource**: User input during contact information setup
- **format**: Phone number format (flexible: +1-234-567-8900 or variations)
- **validation**: Valid phone number, typically 10-15 digits with optional formatting
- **pattern**: `^[\d\-\+\(\)\s]{10,20}$`
- **constraints**: `NOT NULL (if required)`

**Examples**:
- `+1-555-123-4567`
- `(555) 123-4567`
- `5551234567`

### 12. URL/URI Fields

**Pattern**: `^url$`, `^uri$`, `^link`

**Specification**:
- **dataSource**: User input or external system reference
- **format**: Valid URL/URI format
- **validation**: Must be valid URL starting with http:// or https://
- **pattern**: `^https?:\/\/.+`
- **constraints**: `NOT NULL (if required)`

**Examples**:
- `https://example.com`
- `https://api.example.com/v1/resource`

### 13. Date Fields

**Pattern**: `^date$`, `^Date$`, `^startDate`, `^endDate`, `^dueDate`

**Specification**:
- **dataSource**: User input or system-calculated
- **format**: ISO 8601 date format (YYYY-MM-DD)
- **validation**: Valid date, typically current date or future for due dates
- **pattern**: `^\d{4}-\d{2}-\d{2}$`
- **constraints**: `NOT NULL (if required)`

**Examples**:
- `2024-01-15`
- `2024-12-31`

## Data Types and Technical Specifications

### String Type
- **Format**: Text string (1-255 characters typical)
- **Validation**: Non-null, trimmed, length constraints apply
- **Constraints**: NOT NULL (if required)

### Integer Types (Int, BigInt)
- **Format**: Integer number
- **Validation**: Whole number within integer range
- **Constraints**: NOT NULL (if required)

### Numeric Types (Float, Decimal)
- **Format**: Decimal number (typically 2-4 decimal places)
- **Validation**: Numeric value within business constraints
- **Constraints**: NOT NULL (if required)

### Boolean Type
- **Format**: Boolean true/false
- **Validation**: Non-null boolean value
- **Constraints**: NOT NULL, DEFAULT false/true

### DateTime Type
- **Format**: ISO 8601 datetime with timezone
- **Validation**: Valid datetime, typically current timestamp for creation
- **Constraints**: NOT NULL, DEFAULT now() (for timestamps)

### JSON Type
- **Format**: Valid JSON object/array matching schema
- **Validation**: Valid JSON structure, schema validation required
- **Constraints**: NOT NULL (if required), Schema validation

### Bytes Type
- **Format**: Binary data, Base64 encoded for transmission
- **Validation**: Valid binary data, size limits apply
- **Constraints**: NOT NULL (if required), Size limits

## Using Technical Specifications

### For API Development
1. Reference the **format** specification for request/response serialization
2. Implement **validation** rules on both client and server
3. Document **pattern** for client-side validation

### For Database Schema Design
1. Apply **constraints** to database columns
2. Implement **dataSource** logic in application code
3. Ensure **format** compliance in data layer

### For Testing
1. Use **examples** to generate test data
2. Validate against **constraints** in test assertions
3. Test edge cases based on **format** specifications

### For Documentation
1. Include **dataSource** information in API documentation
2. Document **validation** rules in client libraries
3. Provide **pattern** examples in developer guides

## Accessing Technical Specifications

All technical specifications are available in `/docs/generated/schema-metadata.json` for programmatic access. The file contains the complete specification for each field including:

```json
{
  "name": "enterpriseCode",
  "type": "String",
  "dataSource": "Corporate IT during enterprise setup or acquisition integration",
  "format": "COMPANY-DIVISION format (e.g., ACME-AERO, MEDTECH-01)",
  "validation": "Must be uppercase, alphanumeric with hyphens, 6-20 characters",
  "pattern": "^[A-Z0-9\\-]{3,20}$",
  "constraints": ["UNIQUE", "NOT NULL"],
  "examples": ["ACME-AERO", "BOEING-COMM"]
}
```

## Maintenance and Updates

Technical specifications are generated from:
1. Prisma schema definitions
2. Business context documentation
3. Application code analysis
4. Manufacturing domain expertise

When updating database schema:
1. Ensure new fields include technical specifications
2. Run the technical specifications generator
3. Update documentation with new field specifications
4. Add to relevant pattern categories if applicable

## Related Documentation

- [Business Context Documentation](./DATABASE_BUSINESS_CONTEXT.md)
- [Schema Relationships](./generated/schema-relationships.md)
- [Database Metadata](./generated/schema-metadata.json)

---

**Generated**: 2024-11-01
**Coverage**: 100% (3,536 fields documented)
**Framework**: MachShop Manufacturing Execution System (MES)
